<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8">
        <title>Creating OS notifications in HTML5</title>
    </head>
    <body>
        <h1>爱玩 <a title="爱玩C" href="http://www.iwanc.com" target="_blank">http://www.iwanc.com</a></h1>
        <input type="button" value="验证授权" onclick="init();" />
        <input type="button" value="弹出消息" onclick="notify();" />

        <script type="text/javascript">
            const miao = 5;
            function init() {
                if (window.webkitNotifications) {
                    window.webkitNotifications.requestPermission();
                }
            }

function notify() {
    var icon = "logo.jpg";
    var title = "Hello World";
    var body =  "You Are My World (5秒后自动关闭)";

    if (window.webkitNotifications) {
        if (window.webkitNotifications.checkPermission() == 0) {
            var popup = window.webkitNotifications.createNotification(icon, title, body);
            popup.ondisplay = function(event) {
                setTimeout(function() {
                        event.currentTarget.cancel();
                        }, miao * 1000);
            }
            popup.show();
            popup.show();
        } else {
            window.webkitNotifications.requestPermission();
            return;
        }
    }
}
</script>

</body>
</html>
